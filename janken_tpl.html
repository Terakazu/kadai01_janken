<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script src="js/jquery-2.1.3.min.js"></script>
    <link rel="stylesheet" href="css/sample.css">
    <!-- 他のリンクと一緒にFontAwesomeのCSSを読み込む -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <title>じゃんけん</title>
</head>

<body>

    <header>
        <h1>ドアラとじゃんけんしよう！</h1>
    </header>

    <div class="main">
        <div id="playbtn" >＜あそびかた＞</div>
        <p>スタートボタンを押して自分が出す手（グー、チョキ、パー）を押してね！</p>
        <!-- <div id="startbtn" class="btn">ドアラとじゃんけんする
            <audio id="btn_audio">
                <source src="jyanken.mp3" type="audio/mp3">
            </audio> -->
        </div>     
    </div>

    <div class="top-wrapper" id="playguide">
        <div class="modal">
            <img src="doaraface.jpg">
            <p>準備ができたら<br>「ドアラとじゃんけんする」ボタンを<br>おしてね！<br>
                それから、自分が出す手（グー、<br>チョキ、パー）をえらんでね！</p>
        </div>
    </div>

    <div class="face">
        <div class="you">
            <h3>あなた</h3>
            <img src="./img/boyface.gif">
            <ul>
                <li id="gu_btn"><img src="gu.jpg"></li>
                <li id="cho_btn"><img src="cho.jpg"></li>
                <li id="par_btn"><img src="par.jpg"></li>
            </ul>

        </div>
        <div class="doara">
            <h3>ドアラ</h3>
            <img src="doaraface.jpg">
            <div id="pc_hands" class="pc_hands"></div>
        </div>

    </div>


    <div class="outcome-background">
        <div id="outcome" class="outcome-content">
            <h2>結果</h2>
            <div id="judgment">勝ち</div>
            <div id="picture"></div>
        </div>

        <!-- <div class="close-modal">
        <i class="fa fa-2x fa-times"></i>
      </div> -->

    </div>

    <div class="result">
        <h2>対戦成績</h2>
        <div>実施回数：<span id="go">0</span>回</div>
        <div>あなたの勝ち:<span id="win">0</span>回、あなたの勝率:<span id="win_p">0</span></div>
        <div>ドアラの勝ち:<span id="lose">0</span>回、COMの勝率:<span id="lose_p">0</span></div>

    </div>
    </div>

    <footer></footer>
    <script>
        $("#gu_btn").on("click", function () {
            // 1. 乱数を作る（1～3）
            const r = Math.ceil(Math.random() * 3);
            // 2. if分岐処理
            let view = "";
            let account = "";
            let place ="";
            if (r === 1) {
                view = '<img src="gu.jpg">';
                account = 'あいこだよ';
                place ='<img src="doaraogamu.jpg">';
            }
            if (r === 2) {
                view = '<img src="cho.jpg">';
                account = 'あなたの勝ち';
                place ='<img src="doaradance.jpeg">';

            }
            if (r === 3) {
                view = '<img src="par.jpg">';
                account = 'ドアラの勝ち';
                place ='<img src="doarapeace.jpg">';

            }
            // 3. 表示処理
            $("#pc_hands").html(view);
            $("#judgment").html(account);
            $("#picture").html(place);
        });

        $("#cho_btn").on("click", function () {
            // 1. 乱数を作る（1～3）
            const r = Math.ceil(Math.random() * 3);
            // 2. if分岐処理
            let view = "";
            let account = "";
            if (r === 1) {
                view = '<img src="gu.jpg">';
                account = 'ドアラの勝ち';
                place ='<img src="doarapeace.jpg">';

            }
            if (r === 2) {
                view = '<img src="cho.jpg">';
                account = 'あいこだよ';
                place ='<img src="doaraogamu.jpg">';
            }
            if (r === 3) {
                view = '<img src="par.jpg">';
                account = 'あなたの勝ち';
                place ='<img src="doaradance.jpeg">';

            }
            // 3. 表示処理
            $("#pc_hands").html(view);
            $("#judgment").html(account);
            $("#picture").html(place);
        });
        $("#par_btn").on("click", function () {
            // 1. 乱数を作る（1～3）
            const r = Math.ceil(Math.random() * 3);
            // 2. if分岐処理
            let view = "";
            let account = "";
            let picture ="";
            if (r === 1) {
                view = '<img src="gu.jpg">';
                account = 'あなたの勝ち';
                place ='<img src="doaradance.jpeg">';

            }
            if (r === 2) {
                view = '<img src="cho.jpg">';
                account = 'ドアラの勝ち';
                place ='<img src="doarapeace.jpg">';

            }
            if (r === 3) {
                view = '<img src="par.jpg">';
                account = 'あいこだよ';
                place ='<img src="doaraogamu.jpg">';
            }
            // 3. 表示処理
            $("#pc_hands").html(view);
            $("#judgment").html(account);
            $("#picture").html(place);
        });

       $("#startbtn").on("click",function(){
        audio();
       })

      

        function updateMatchCount() {
            let matchCount = $("#go").text(); // 現在の対戦回数を取得
            matchCount = parseInt(matchCount) + 1; // 数値に変換して1を加える
            $("#go").text(matchCount); // 更新した対戦回数を表示する
        };

        $("#gu_btn").on("click", function () {
            // じゃんけんの処理
            updateMatchCount(); // 対戦回数を更新
            // その他の処理
        });

        $("#cho_btn").on("click", function () {
            // じゃんけんの処理
            updateMatchCount(); // 対戦回数を更新
            // その他の処理
        });

        $("#par_btn").on("click", function () {
            // じゃんけんの処理
            updateMatchCount(); // 対戦回数を更新
            // その他の処理
        });

        function updatewinCount() {
            let winCount = $("#win").text();
            winCount = parseInt(winCount) + 1;
            $("#win").text(winCount);
        };
        function updateloseCount() {
            let loseCount = $("#lose").text();
            loseCount = parseInt(loseCount) + 1;
            $("#lose").text(loseCount);
        };

        $("#gu_btn").on("click", function () {
            if ($("#pc_hands").html() == '<img src="cho.jpg">') {
                updatewinCount();
            } else if ($("#pc_hands").html() == '<img src="par.jpg">') {
                updateloseCount();
            }
        });
        $("#cho_btn").on("click", function () {
            if ($("#pc_hands").html() == '<img src="par.jpg">') {
                updatewinCount();
            } else if ($("#pc_hands").html() == '<img src="gu.jpg">') {
                updateloseCount();
            }
        });
        $("#par_btn").on("click", function () {
            if ($("#pc_hands").html() == '<img src="gu.jpg">') {
                updatewinCount();
            } else if ($("#pc_hands").html() == '<img src="cho.jpg">') {
                updateloseCount();
            }
        });

        function updateWinPercentage() {
            let winCount = parseInt($("#win").text()); // 勝った回数を取得
            let totalCount = parseInt($("#go").text()); // 対戦回数を取得
            let winPercentage = winCount / totalCount; // 勝率を計算
            $("#win_p").text(winPercentage.toFixed(2)); // 勝率を小数点以下2桁まで表示してHTMLにセット
        }

        function updateLosePercentage() {
            let loseCount = parseInt($("#lose").text()); // 負けた回数を取得
            let totalCount = parseInt($("#go").text()); // 対戦回数を取得
            let losePercentage = loseCount / totalCount; // 負け率を計算
            $("#lose_p").text(losePercentage.toFixed(2)); // 負け率を小数点以下2桁まで表示してHTMLにセット
        }

        // 勝率を更新するために、勝ち負け回数が更新されるたびに呼び出します
        $("#gu_btn, #cho_btn, #par_btn").on("click", function () {
            updateWinPercentage(); // 勝率を更新
            updateLosePercentage(); // 負け率を更新
        });

        $('.close-modal').click(function () {
            $('#outcome').fadeOut();
        })

        // モーダルを閉じる関数
        function closeModal() {
            $('#outcome').fadeOut(); // モーダルを非表示にする
            $('.modal-background').fadeOut(); // モーダルの背景を非表示にする
        }

        // モーダルの×ボタンと背景をクリックしたときにモーダルを閉じる
        $('.close-modal, .modal-background').click(function () {
            closeModal();
        });

        // // じゃんけんの処理
        // function janken(result) {
        //         updateMatchCount(); // 対戦回数を更新

        //         // その他の処理
        //         if (result === 'win') {
        //             updatewinCount();
        //         } else if (result === 'lose') {
        //             updateloseCount();
        //         }

        //         updateWinPercentage(); // 勝率を更新
        //         updateLosePercentage(); // 負け率を更新
        //     }

        //     $("#gu_btn").on("click", function() {
        //         const r = Math.ceil(Math.random() * 3);

        //         let view = "";
        //         let account="";

        //         if (r === 1) {
        //             view = '<img src="gu.jpg">';
        //             account = 'あいこだよ';
        //         } else if (r === 2) {
        //             view = '<img src="cho.jpg">';
        //             account = 'あなたの勝ち';
        //             janken('win');
        //         } else {
        //             view = '<img src="par.jpg">';
        //             account = 'ドアラの勝ち';
        //             janken('lose');
        //         }

        //         $("#pc_hands").html(view);
        //         $("#judgment").html(account);
        //         $("#outcome").fadeIn();
        //     });

        //     $("#cho_btn").on("click", function() {
        //         const r = Math.ceil(Math.random() * 3);

        //         let view = "";
        //         let account="";

        //         if (r === 1) {
        //             view = '<img src="gu.jpg">';
        //             account = 'ドアラの勝ち';
        //             janken('lose');
        //         } else if (r === 2) {
        //             view = '<img src="cho.jpg">';
        //             account = 'あいこだよ';
        //         } else {
        //             view = '<img src="par.jpg">';
        //             account = 'あなたの勝ち';
        //             janken('win');
        //         }

        //         $("#pc_hands").html(view);
        //         $("#judgment").html(account);
        //         $("#outcome").fadeIn();
        //     });

        //     $("#par_btn").on("click", function() {
        //         const r = Math.ceil(Math.random() * 3);

        //         let view = "";
        //         let account="";

        //         if (r === 1) {
        //             view = '<img src="gu.jpg">';
        //             account = 'あなたの勝ち';
        //             janken('win');
        //         } else if (r === 2) {
        //             view = '<img src="cho.jpg">';
        //             account = 'ドアラの勝ち';
        //             janken('lose');
        //         } else {
        //             view = '<img src="par.jpg">';
        //             account = 'あいこだよ';
        //         }

        //         $("#pc_hands").html(view);
        //         $("#judgment").html(account);
        //         $("#outcome").fadeIn();
        //     });

        //     // モーダルの×ボタンと背景をクリックしたときにモーダルを閉じる
        //     $('.close-modal, .modal-background').click(function(){
        //         closeModal();
        //     });

        //     // 対戦回数を更新する関数
        //     function updateMatchCount() {
        //         let matchCount = $("#go").text();
        //         matchCount = parseInt(matchCount) + 1;
        //         $("#go").text(matchCount);
        //     }

        //     // 勝ち数を更新する関数
        //     function updatewinCount() {
        //         let winCount = $("#win").text();
        //         winCount = parseInt(winCount) + 1;
        //         $("#win").text(winCount);
        //     }

        //     // 負け数を更新する関数
        //     function updateloseCount() {
        //         let loseCount = $("#lose").text();
        //         loseCount = parseInt(loseCount) + 1;
        //         $("#lose").text(loseCount);
        //     }

        //     // 勝率を更新する関数
        //     function updateWinPercentage() {
        //         let winCount = parseInt($("#win").text());
        //         let totalCount = parseInt($("#go").text());
        //         let winPercentage = winCount / totalCount;
        //         $("#win_p").text(winPercentage.toFixed(2));
        //     }

        //     // 負け率を更新する関数
        //     function updateLosePercentage() {
        //         let loseCount = parseInt($("#lose").text());
        //         let totalCount = parseInt($("#go").text());
        //         let losePercentage = loseCount / totalCount;
        //         $("#lose_p").text(losePercentage.toFixed(2));
        //     }








    </script>





</body>

</html>